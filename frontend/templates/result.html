{% extends "base.html" %}

{% block title %}Wyniki analizy - Emotify{% endblock %}

{% block content %}
<div class="result">
    <h1>üéµ Analiza emocji</h1>
    
    <div class="track-header">
        <img src="{{ track['album']['images'][0]['url'] }}" alt="{{ track['name'] }}" class="album-cover">
        <div>
            <h2>{{ track['name'] }}</h2>
            <p class="artist">{{ track['artists'][0]['name'] }}</p>
        </div>
    </div>
    
    {% if is_mock %}
    <div class="alert alert-warning">
        <strong>‚ö†Ô∏è Backend ML niedostƒôpny</strong><br>
        {% if error_message %}
        {{ error_message }}<br>
        {% endif %}
        Wy≈õwietlane sƒÖ <strong>przyk≈Çadowe dane</strong> do testowania UI.<br>
    </div>
    {% else %}
    <div class="alert alert-success">
        <strong>‚úÖ Prawdziwa predykcja z modelu ML</strong>
    </div>
    {% endif %}
    
    <h3>Top emocje:</h3>
    <div class="emotions-list">
        {% for tag, prob in emotions %}
        <div class="emotion-item">
            <span class="emotion-label">{{ tag }}</span>
            <div class="emotion-bar-container">
                <div class="emotion-bar" style="width: {{ prob * 100 }}%;">
                    <span class="emotion-value">{{ "%.1f"|format(prob * 100) }}%</span>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    
    <div class="actions">
        <a href="/dashboard" class="btn btn-secondary">‚Üê Powr√≥t do dashboard</a>
    </div>
</div>
{% endblock %}